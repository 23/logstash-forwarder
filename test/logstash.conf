input {
  lumberjack {
    format => json_event
    type => lumberjack
    port => 3333
    ssl_certificate => "./server.crt"
    ssl_key => "./server.key"
  }
}

filter {
  grok { match => [ "@source_path", "^.*/%{DATA:file}" ] }
  age { }
  metrics {
    timer => [ "age.%{file}", "%{age}" ]
    add_tag => metric
  }
}

output {
  stdout {
    tag => metric
  }
}
